#!/usr/bin/env zsh

function main() {
  setopt local_options aliases
  local -a global_aliases=(${(@f)"$(alias -g)"})
  local -a aliases=(${global_aliases%%\=*})
  if (($aliases[(I)${LBUFFER##* }])); then
     zle _expand_alias
     zle expand-word
  fi  
  zle self-insert
}

main
